# 東京観光ガイドAIアプリ 引継書

## プロジェクト概要
React Native (Expo) で開発された東京観光ガイドチャットボットアプリです。
ユーザーの現在地に基づいて、徒歩10分以内の実在する飲食店や観光スポットを推薦します。

## 技術スタック
- **フレームワーク**: React Native + Expo (SDK 52)
- **言語**: TypeScript
- **AI API**: OpenAI GPT-3.5-turbo
- **スタイリング**: React Native StyleSheet
- **位置情報**: Web Geolocation API

## 主要ファイル構成

### `/app/chat/ChatScreen.tsx`
メインのチャット画面コンポーネント
- AIとの会話管理
- 位置情報の取得と連携
- ストリーミングレスポンス表示

### `/lib/api.ts`
AI API連携モジュール
- OpenAI, Gemini, Anthropic対応
- ストリーミング/通常レスポンス切り替え
- モックレスポンス機能

### `/lib/prompts.ts`
AIキャラクター設定
- キャラクター名: みさき
- 役割: 東京観光ガイド
- 応答文字数: 90-120文字

### `/lib/restaurants-data.ts`
実在店舗データベース（約100店舗）
- 13エリアの飲食店情報
- 店名、住所、徒歩時間、カテゴリ、価格帯

### `/lib/location.ts`
位置情報サービス
- 現在地取得
- 東京エリア判定（13エリア）

### `/lib/navigation.ts`
ナビゲーションリンク生成
- Google Maps URL生成
- Apple Maps URL生成

### `/components/ChatBubble.tsx`
チャットメッセージ表示
- URLリンクのクリック対応
- タイピングアニメーション

### `/components/ChatInput.tsx`
メッセージ入力UI
- テキスト入力
- 音声入力ボタン（実装予定）
- 位置情報取得ボタン

## 環境変数（.env）
```
EXPO_PUBLIC_OPENAI_API_KEY=sk-proj-... # OpenAI APIキー
EXPO_PUBLIC_GEMINI_API_KEY=AIzaSy...   # Gemini APIキー（未使用）
```

## セットアップ手順

### 1. 依存関係インストール
```bash
npm install
```

### 2. 環境変数設定
`.env`ファイルを作成し、APIキーを設定

### 3. 開発サーバー起動
```bash
npx expo start
```
- `i`: iOSシミュレーター
- `a`: Androidエミュレーター  
- `w`: Webブラウザ

## 主要機能

### 1. 観光案内チャット
- ユーザーの質問に東京観光情報で応答
- 90-120文字の簡潔な返答

### 2. 位置情報連携
- 現在地取得（位置情報ボタン）
- エリア判定（新宿、渋谷、浅草など13エリア）
- 徒歩10分以内の店舗推薦

### 3. 実在店舗データベース
- すしざんまい、くら寿司、一蘭など実在チェーン店
- 架空の店舗を推薦しない仕組み

### 4. ナビゲーション
- 推薦店舗へのGoogle Maps/Apple Mapsリンク
- ワンタップでナビ開始

## カスタマイズ方法

### キャラクター変更
`lib/prompts.ts`の`DEFAULT_PERSONALITY`を編集
```typescript
export const DEFAULT_PERSONALITY: PersonalityConfig = {
  name: '新しい名前',
  tone: 'friendly', // friendly, romantic, caring, playful
  formality: 'mixed', // casual, polite, mixed
  interests: ['観光', 'グルメ'], // 専門分野
  responseStyle: 'concise', // concise, detailed, conversational
};
```

### 地域データ変更
`lib/restaurants-data.ts`の`REAL_RESTAURANTS`を編集
```typescript
export const REAL_RESTAURANTS = {
  '新エリア名': [
    { name: '店名', walkTime: 5, address: '住所', category: 'カテゴリ', priceRange: '￥' }
  ]
};
```

### エリア判定変更
`lib/location.ts`の`getTokyoArea`メソッドを編集

## 既知の問題と対策

### 1. ストリーミングエラー
React Native環境でOpenAI APIのストリーミングが動作しない
→ 通常のAPIコールを使用して文字ごとに表示

### 2. 日本語入力の変換確定
エンターキーで変換中に送信される問題
→ IMEのcomposition eventを監視して制御

### 3. 位置情報取得エラー
権限拒否やタイムアウト
→ エラー時は手動で最寄り駅を入力させる

## 今後の実装予定

1. **音声入力機能**
   - Web Speech APIまたはWhisper API連携

2. **データベース連携**
   - Firebase Firestore統合
   - リアルタイム店舗情報更新

3. **多言語対応**
   - 英語、中国語、韓国語対応

4. **画像認識**
   - 観光地の写真から情報提供

## デプロイ方法

### iOS App Store
```bash
eas build --platform ios
eas submit -p ios
```

### Google Play Store
```bash
eas build --platform android
eas submit -p android
```

### Web版
```bash
npx expo export:web
# distフォルダをWebサーバーにアップロード
```

## サポート連絡先
- リポジトリ: /Users/hide/Desktop/projects/language/ai-girlfriend-chat
- 最終更新: 2025年9月8日

## ライセンス
MIT License

---
このアプリは元々AI彼女チャットから東京観光ガイドに転用されたものです。
同様の手法で任意の地域や用途に転用可能です。